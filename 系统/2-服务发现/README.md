### 服务发现

#### DNS或者VIP

通过DNS的解析对应到ip

缺点：DNS采用多级缓存机制，一般缓存时间比较长

#### Zookeeper

利用ZK的watch机制，当有节点注册时通知订阅的服务方

缺点：ZK是CP，ZK集群每次发生变化会更新每个节点。节点数也有限制，一半超过10w个性能就很慢了

#### 消息总线

类似MQ。来同步服务发现

京东的jsf，注册中心同步就是靠的消息总线，消息有整体递增的版本。

注册中心也会定时取其他注册中心拉取最新消息

节点下线，时通过jsf消费者访问报错时重试，来清除本地缓存达到目的





